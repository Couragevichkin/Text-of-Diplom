
\chapter{Введение}
\hspace{1cm} Неазвисимо от стараний разработчика или сложности проекта, большая часть времени разработки
будет потрачена на то, чтобы убедиться, что устройство работает правильно, или -- что наиболее
вероятно -- разобраться, почему устройство работает не так, как ожидалось. Отладчик -- самый мощный 
инструмент в наборе инструментов разработчика, позволяющий напрямую взаимодействовать с процессором,
задавать точки останова, пошагово управлять потоком выполнения инструкций и проверять  значения
регистров. \cite{Lakamera:embed}

Для устройств <<интернета вещей>> очень важно знать и отслеживать энергопотребление,
ведь обычно такие устройства питаются от батарейки и каждое ненужное действие уменьшит
срок службы. Мониторинг энергопотребления позволяет понять энргоэффективность каждого сенса связи,
что позволит выбрать наиболее подходящий интерфейс и протокол передачи данных.

Об актуальности возможности мониторинга энерегопотребления для отладчика говорит количество 
измерительных устройств на рынке. Характеристики основных из них приведены в таблице 1.1.

\begin{table}[H]
    \caption{Сравнение характеристик измерительных устройств}   
    \begin{center}
    \begin{tabular}{|c|c|c|c|c|}
    \hline
  Устройство & Joulescope & Otii Arc & NanoRanger & Current Ranger \\ \hline
    Диапазон тока & от -1 А до 3 А & от 0 до 2,5 А & от 1 нА до 800 мА & от -1,65 А до 3 А \\ \hline
    Разрешение & 1 нА & десятки нА & до 10 пА & до 1 пА  \\ \hline
    Погрешность & до 0,3\% & до 0,1\% & до 0,3\% & до 0,1\% \\ \hline
    Цена & 800 \$ & 700 \$ & 220 \$ & 120 \$  \\ \hline
    \end{tabular}
    \end{center}
\end{table} 


Перед проектированием отладчика с возможностью мониторинга энергопотребления IoT-устройств
следует определиться с требованиями, предъявлемыми к отладчику. 
Для этого в качестве примера рассмотрим <<усредненный>> паттерн поведения устройства с BLE, одной
из самых популярных технологий беспроводной передачи данных интернета вещей, 
у которого с периодичностью в несколько десятков мс повторяется такой цикл: спящий режим 
с токопотреблением единицы мкА, далее устройство просыпается, в этот момент
энерго потребление составляет единицы мА, время просыпания -- десятки мкс, далее происходит
сеанс связи, который начинается с передачи, с токопотреблением примерно десятки мА 
и длительностю передачи <<пустого>> пакета величиной 27 байт около 200 мкс, и продолжается 
ожиданием ответа длительностью в среднем 150 мкс, после сеанс связи завершается приемом,
при котором токопотребление составляет единицы-десятки мА длительностью 200 мкс.
Данный паттерн поведения, при известной максимальной скорости передачи и приема в 2 Мбит/с для 
Bluetooth версии 5, позволяет оценить необходимую полосу пропускания подсистемы измерения,
её разрешение по измеряемому току и скорость переключения диапазона измеряемых токов. 

Для обеспечения конкурентноспособности отладчика, остальные характиристики можно определить 
из таблицы 1.1, а так же из анализа типичной используемой элементной базы.

%сюда вставить разгон про то, почему отладчик удаленный и как это вытекает в требования к питанию

Резюмируя вышесказанное, можно ориентироваться на следующие требования к разрабатываемому 
устройству:
\begin{itemize}
    \item полоса пропускания -- 200 кГц
    \item напряжение питания отлаживаемых устройств -- от 1,8 В до 12 В
    \item погрешность измерения -- до 0,5\%
    \item диапазон тока -- от 3,2 мА до 2 А
    \item разрешение -- 0,16 мкА
    \item время переключения диапазонов - десятки мкс
    \item себестоимость устройства -- 5000 руб.
\end{itemize}

Данные требования, предъявляемые на этапе началального анализа, в ходе более детальной проработки,
изучения и тестирования в дальнейшем будут уточнены в соответствии с полученными результатами.
